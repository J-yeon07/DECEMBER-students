import streamlit as st

# 페이지 기본 설정
st.set_page_config(page_title="세특 자동 생성기", page_icon="📝", layout="wide")

# ---------------------------------------------------------
# 1. 데이터베이스 구축 (이미지 내용을 그대로 옮겼습니다)
# ---------------------------------------------------------
data = {
    "1차: 모둠 활동 (태도와 실천)": {
        "A": "모둠원들과 적극적으로 소통하고 협력하며, 자발적으로 역할 수행하고, 필요한 경우 다른 모둠원들을 도와줌.",
        "B": "모둠활동에서 리더 역할을 맡아 의견을 조율하고 구성원들의 참여를 이끌며 협력적 분위기를 조성함.",
        "C": "활동 중에 경청, 존중, 배려의 태도를 보이며, 모둠별 과제 달성을 위해 책임감 있는 행동을 지속적으로 실천함.",
        "D": "모둠과제 수행 시 필요한 정보를 스스로 탐색하여 공유하고, 구성원들의 의견을 균형 있게 반영하려는 성숙한 태도를 보임.",
        "E": "모둠 내 역할을 책임감 있게 수행하며, 다른 친구들의 활동을 돕는 과정에서 뛰어난 협력 능력을 나타냄.",
        "F": "다양한 활동에서 친구들의 의견을 경청하고 타협점을 찾는 등 원만한 의사소통 능력을 발휘함.",
        "G": "활동 과정에서 자료 정리, 기록 등 필요한 업무를 정확하게 수행하여 팀의 완성도를 높임.",
        "H": "활동 초반에는 소극적이었으나, 지속적인 안내를 통해 점차 활동에 참여하려는 태도가 향상됨.",
        "I": "모둠원의 도움과 격려 속에서 자신의 역할을 찾아 수행하려는 노력이 눈에 띔."
    },
    "2차: 개별 활동 (태도와 실천)": {
        "A": "황금 명함 만들기 활동을 통해 황금비의 수학적 원리를 깊이 이해하고, 이를 실제 제작 과정에 적용하며 수학적 탐구 역량을 향상시킴.",
        "B": "황금 명함 제작 활동 과정에서 황금비의 개념과 구성 원리를 스스로 탐구하며 수학적 사고를 깊이 있게 확장함.",
        "C": "황금비의 비율 구조를 명확히 이해하고 이를 실제 디자인 작업에 적용하여 수학 개념을 실생활 문제 해결로 연결하는 능력을 보임.",
        "D": "교사의 안내를 기반으로 황금 명함 만들기를 계획하고 수행하는 능력이 향상됨.",
        "E": "초반에는 황금 명함 만들기 활동에서 다소 소극적이었으나, 점차 자신의 속도에 맞추어 활동에 몰입하는 모습을 보임.",
        "F": "새로운 과제 제시 시 스스로 해결 전략을 세우고 적용하는 등 높은 문제해결력을 나타냄.",
        "G": "꾸준한 자기 점검을 통해 오류를 스스로 수정하는 등 성실한 태도를 보임.",
        "H": "개별 활동에 기본적인 참여를 하며, 과제를 완성도나 성실성이 다소 부족하여 제출함. 집중력이 다소 떨어지거나, 스스로 해결하기보다 교사의 지도를 기다리는 편임.",
        "I": "개별 활동에 소극적으로 참여하며, 과제를 대충 수행하는 편임. 활동 중 지속적인 지도가 필요하며 자기 주도성이 거의 없는 편임."
    },
    "3차: 그래프 (수학적 개념)": {
        "A": "자신의 인생에 대해 깊이 성찰하며 장단기 목표를 설정하고, 이를 시각적으로 그래프로 표현하여 체계적으로 미래를 설계하는 태도를 보임.",
        "B": "미래 계획과 개인적 성장을 그래프 형태로 정리하며, 자신의 삶을 객관적으로 분석하고 목표 달성을 위한 구체적 계획을 수립함.",
        "C": "자기 이해를 바탕으로 삶의 방향성을 탐구하고, 그래프를 통해 시각화하며 논리적·체계적으로 미래를 설계함.",
        "D": "인생의 중요한 선택과 목표를 수치와 그래프로 표현하며, 자기 성찰과 계획 능력을 동시에 향상시킴.",
        "E": "일생 그래프 활동을 통해 삶의 변화를 시각화하고, 주요 경험의 의미를 해석하며 자기 성찰 능력을 기름.",
        "F": "자신의 성장 과정과 경험을 수치화하고 그래프로 표현함으로써 논리적 사고와 자기 이해를 동시에 발전시킴.",
        "G": "그래프를 통해 자신의 성장과 변화 과정을 해석하고, 삶의 의미와 향후 목표를 성찰하는 능력을 보임."
    },
    "4차: 글쓰기 (능력)": {
        "A": "자신의 경험과 생각을 풍부하게 표현하며 글의 구조와 논리도 명확하게 구성함.",
        "B": "글을 통해 자신의 감정과 경험을 깊이 있게 성찰하고, 독자가 공감할 수 있도록 서술하는 능력이 뛰어남.",
        "C": "창의적 표현과 구체적 사례를 적절히 활용하여 글의 완성도를 높임.",
        "D": "자신의 경험과 생각을 일정 수준으로 표현하며 글의 흐름을 이해하고 구성할 수 있음.",
        "E": "감정과 경험을 서술하려는 노력이 보이며, 기본적인 자기 성찰이 나타남.",
        "F": "글의 내용이 명확하지만, 표현력이나 깊이 측면에서는 개선의 여지가 있음.",
        "G": "글의 구성과 표현력이 다소 부족하지만, 교사의 안내나 피드백을 통해 개선하려는 태도가 보임.",
        "H": "자신의 생각을 서술하는 과정에서 점차 성찰 능력과 표현력이 향상될 가능성이 있음."
    }
}

# ---------------------------------------------------------
# 2. 앱 화면 구성 (UI)
# ---------------------------------------------------------
def main():
    st.title("🏫 세특 문구 생성 도우미")
    st.markdown("학생의 **활동별 성취수준(A~I)**을 선택하면, 내용을 수합하고 **유사 버전 생성 프롬프트**를 만들어줍니다.")
    
    st.divider()

    # 화면을 좌우로 나눔 (왼쪽: 선택, 오른쪽: 결과)
    col1, col2 = st.columns([1, 1.2])

    with col1:
        st.subheader("📌 수준 선택")
        st.info("각 활동에 대한 학생의 수준을 선택하세요.")
        
        selections = {}
        
        # 반복문으로 선택지 생성
        for category, options in data.items():
            # Selectbox 라벨과 옵션 설정
            option_keys = list(options.keys())
            selected_key = st.selectbox(f"**{category}**", option_keys, index=0)
            
            # 선택된 문장 저장
            selections[category] = options[selected_key]
            
            # 선택한 내용 미리보기 (작은 글씨)
            st.caption(f"└ {options[selected_key]}")
            st.write("") # 간격 띄우기

    with col2:
        st.subheader("📄 결과 확인")
        
        # 버튼을 누르면 결과 생성
        if st.button("문구 생성하기", type="primary"):
            
            # 1. 문장 합치기
            full_text = " ".join(selections.values())
            
            st.success("✅ [종합본] 성취수준 수합 결과")
            st.text_area("복사해서 사용하세요", full_text, height=150)
            
            st.divider()
            
            # 2. AI 변형 버전 요청용 프롬프트 생성
            st.warning("🤖 [AI 기능] 유사 버전 2개 만들기")
            st.markdown("""
            아래 **'AI 명령어'**를 복사해서 **ChatGPT**나 **Gemini** 채팅창에 붙여넣으세요.
            자동으로 **비슷한 어투와 길이의 다른 문장 2개**를 만들어줍니다.
            """)
            
            prompt_text = f"""
다음은 학생의 학교생활기록부 내용입니다.
이 내용과 사실 관계는 동일하게 유지하되, **문체의 어조와 길이를 비슷하게 맞춰서** 표현만 다르게 한 **새로운 버전 2가지**를 작성해주세요.
교사가 작성한 것처럼 전문적이고 교육적인 용어를 사용하세요.

[원본 내용]
{full_text}
"""
            st.code(prompt_text, language='text')

if __name__ == "__main__":
    main()
